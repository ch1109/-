# 金融原型机交互演示 - 开发说明

## 项目概述

这是一个基于React + TypeScript + Vite的金融AI智能理财投顾平台交互原型,展示了两种核心交互模式:

1. **流程A: AI工作模式** - 深度理财咨询(教育金规划场景)
2. **流程B: 业务辅助模式** - 快速业务办理(风险测评场景)

## 快速开始

### 启动开发服务器

```bash
cd roadmap-web
npm run dev
```

访问 `http://localhost:5173` (或终端显示的端口)

### 使用说明

1. 打开浏览器后,默认进入"🚀 金融原型机交互演示"视图
2. 在待机态首页,可以看到两个入口按钮:
   - **待机态 → AI工作模式**: 点击进入流程A
   - **待机态 → 业务辅助模式**: 点击进入流程B
3. 每个流程都可以通过左上角的"← 返回首页"按钮返回待机态

## 项目结构

```
roadmap-web/src/
├── components/
│   ├── FinancialPrototype.tsx    # 主容器组件,管理三种状态切换
│   ├── StandbyHome.tsx            # 待机态首页
│   ├── StandbyHome.css
│   ├── FlowA.tsx                  # 流程A: AI工作模式
│   ├── FlowA.css
│   ├── FlowB.tsx                  # 流程B: 业务辅助模式
│   └── FlowB.css
├── types/
│   └── financial-prototype.ts     # 完整的类型定义
└── App.tsx                        # 主应用,集成新视图
```

## 核心功能

### 流程A: AI工作模式 (教育金规划)

**交互流程:**
1. **初始欢迎** - AI主动问候并说明流程
2. **渐进式提问** (5个问题)
   - 孩子年龄
   - 目标金额
   - 家庭月收入
   - 每月固定支出
   - 当前可投资存款
3. **实时画像更新** - 雷达图随回答动态增长
4. **可行性评估** - 计算储蓄率并给出可行性判断
5. **方案生成** - 生成2个投资方案(稳健型、平衡型)
6. **方案对比** - 展示资产配置、预期收益、优缺点

**双区域布局:**
- **左侧 Agent工作区 (60%)**: 展示雷达图、可行性评估、投资方案
- **右侧 聊天交互区 (40%)**: 完整对话历史、可折叠的思考过程、Agent协同日志

**核心特性:**
- ✅ 只展示成果,不展示过程性文字
- ✅ 思考过程可折叠查看
- ✅ Agent协同日志实时更新
- ✅ 进度条动画
- ✅ 雷达图动态增长

### 流程B: 业务辅助模式 (风险测评)

**交互流程:**
1. **身份核验** - 模拟身份证读卡
2. **风险测评** (5道题)
   - 年龄范围
   - 投资经验
   - 家庭年收入
   - 可承受损失
   - 流动性需求
3. **AI主动介入** - 检测用户停留时间,主动提供帮助
4. **测评结果** - 显示风险等级、适合产品、完整报告

**双区域布局:**
- **左侧 业务办理区 (60%)**: 5步进度条、表单界面、测评结果
- **右侧 聊天交互区 (40%)**: 当前步骤提示、AI陪伴对话、快捷问题

**核心特性:**
- ✅ 5步进度条始终可见
- ✅ 当前步骤固定提示
- ✅ AI主动介入(停留10秒自动提示)
- ✅ 快捷问题按钮
- ✅ 底部浮动帮助提示

## 设计原则

### Agent工作区设计原则
1. **展示成果,而非过程** - 只显示图表、数据卡片、分析结果
2. **禁止解释性文字** - 避免"正在分析..."、"我认为..."等说明
3. **动态更新** - 根据聊天区对话实时更新

### 聊天交互区设计原则
1. **对话式交互** - 类似ChatGPT的一问一答
2. **完整展示AI思考** - 用户输入 → AI回复 → 思考过程 → 最终输出
3. **按时间顺序** - 依次显示所有内容

## 技术实现

### 状态管理

**FlowA状态:**
```typescript
interface FlowAState {
  currentStage: 'initial' | 'questioning' | 'feasibility' | 'solution' | 'completed';
  userProfile: UserProfile;
  radarData: RadarData;
  questionIndex: number;
  feasibilityResult?: FeasibilityResult;
  plans: InvestmentPlan[];
  messages: Message[];
  isGenerating: boolean;
  progress: number;
}
```

**FlowB状态:**
```typescript
interface FlowBState {
  currentStage: 'identity' | 'assessment' | 'confirmation' | 'agreement' | 'completed';
  businessSteps: BusinessStep[];
  currentQuestionIndex: number;
  answers: Record<number, string>;
  assessmentResult?: RiskAssessmentResult;
  messages: Message[];
  showHelp: boolean;
}
```

### 动画效果

**已实现:**
- 进度条平滑过渡 (300ms ease-out)
- 雷达图数值增长动画
- 按钮悬停效果
- 消息自动滚动
- 步骤完成脉冲动画

**待优化:**
- 状态切换淡入淡出 (800ms)
- AI消息打字机效果
- 数字滚动动画
- 卡片展开/收起动画

### 色彩系统

**流程A (AI工作模式):**
- 主色: 蓝色 `#3b82f6` → `#2563eb`
- 辅助色: 紫色 `#8b5cf6`
- 成功色: 绿色 `#10b981`

**流程B (业务辅助模式):**
- 主色: 紫色 `#8b5cf6` → `#7c3aed`
- 警告色: 黄色 `#fbbf24`
- 成功色: 绿色 `#10b981`

## 下一步优化

### 任务5: 添加动画和交互效果
- [ ] 状态切换淡入淡出动画
- [ ] AI消息流式输出(打字机效果)
- [ ] 数字滚动动画
- [ ] 雷达图Canvas实现(更流畅)
- [ ] 卡片展开/收起动画
- [ ] 加载骨架屏

### 任务6: 测试和优化
- [ ] 完整流程测试
- [ ] 边界情况处理
- [ ] 性能优化(虚拟滚动、懒加载)
- [ ] 响应式适配
- [ ] 无障碍优化
- [ ] 浏览器兼容性测试

## 参考文档

- **设计方案**: `金融原型机首页交互设计优化方案.md` (1,412行完整方案)
- **执行摘要**: `交互设计优化方案-执行摘要.md`
- **原始需求**: `待机态到工作态.md`

## 技术栈

- **框架**: React 19.1.1
- **语言**: TypeScript 5.9.3
- **构建工具**: Vite 7.1.7
- **样式**: CSS Modules + CSS Variables
- **图表**: 简化版雷达图(可升级为ECharts)

## 开发建议

1. **保持双区域联动** - 聊天区的对话应该实时反映在工作区
2. **遵循设计原则** - 工作区只展示成果,聊天区展示过程
3. **注重细节** - 动画、过渡、反馈都要流畅自然
4. **用户体验优先** - 确保每个交互都有明确的反馈

## 常见问题

**Q: 如何切换回其他视图?**
A: 点击顶部导航栏的其他视图按钮(如"旅程视图"、"AI角色"等)

**Q: 如何修改问题内容?**
A: 编辑 `FlowA.tsx` 中的 `questions` 数组或 `FlowB.tsx` 中的 `RISK_QUESTIONS` 常量

**Q: 如何添加新的投资方案?**
A: 在 `FlowA.tsx` 的 `showPlans()` 函数中的 `plans` 数组添加新方案

**Q: 如何调整AI主动介入的时间?**
A: 修改 `FlowB.tsx` 中 `useEffect` 的 `setTimeout` 时间(当前为10秒)

## 联系方式

如有问题或建议,请参考设计文档或联系开发团队。

---

**最后更新**: 2025-10-31
**版本**: v1.0.0
**状态**: ✅ 核心功能已完成,待优化动画和测试

