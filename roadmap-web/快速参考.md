# 金融原型机 - 快速参考卡片

## 🚀 快速启动

```bash
cd roadmap-web
npm run dev
# 访问 http://localhost:5173
```

---

## 📋 两个流程对比

| 维度 | 流程A: AI工作模式 | 流程B: 业务辅助模式 |
|------|------------------|-------------------|
| **场景** | 教育金规划 | 风险测评 |
| **时长** | 3-5分钟 | 2-3分钟 |
| **问题数** | 5个问题 | 5道题 |
| **核心特性** | 实时画像雷达图 | 5步进度条 |
| **AI角色** | 主动引导 | 陪伴辅助 |
| **成果展示** | 投资方案对比 | 风险等级报告 |
| **主色调** | 蓝色 #3b82f6 | 紫色 #8b5cf6 |

---

## 🎯 流程A关键节点

### 1️⃣ 渐进式提问 (5个问题)
```
1. 孩子年龄 → 影响"时间规划"维度
2. 目标金额 → 影响"时间规划"维度
3. 月收入 → 影响"收入稳定性"维度
4. 月支出 → 影响"储蓄能力"维度
5. 当前存款 → 影响"储蓄能力"维度
```

### 2️⃣ 雷达图5个维度
- 收入稳定性
- 储蓄能力
- 风险承受
- 投资经验
- 时间规划

### 3️⃣ 可行性评估指标
- ✅ 可行性判断
- 💰 每月需储蓄金额
- 📊 储蓄率百分比

### 4️⃣ 投资方案对比
**稳健型**:
- 资产配置: 40%货币 + 40%债券 + 20%混合
- 预期收益: 4.5% - 7.5%
- 风险等级: R2

**平衡型**:
- 资产配置: 30%债券 + 50%混合 + 20%股票
- 预期收益: 6% - 12%
- 风险等级: R3

---

## 🎯 流程B关键节点

### 1️⃣ 5步业务流程
```
1. 身份核验 (2秒自动完成)
2. 风险测评 (5道题)
3. 信息确认
4. 协议签署
5. 完成
```

### 2️⃣ 风险测评5道题
```
1. 年龄范围 (4个选项)
2. 投资经验 (4个选项)
3. 家庭年收入 (4个选项)
4. 可承受损失 (4个选项)
5. 流动性需求 (4个选项) ← AI主动介入
```

### 3️⃣ AI主动介入触发条件
- 停留时间 > 10秒
- 当前题目: 第5题(流动性需求)
- 提示方式: 黄色帮助框

### 4️⃣ 风险等级划分
| 总分 | 等级 | 类型 | 适合产品 |
|------|------|------|----------|
| 5-7 | R1 | 保守型 | 货币基金、国债、银行理财 |
| 8-11 | R2 | 谨慎型 | 债券基金、结构性存款 |
| 12-15 | R3 | 稳健型 | 混合基金、债券基金 |
| 16-20 | R4 | 进取型 | 股票基金、指数基金 |

---

## 🎨 设计规范速查

### 色彩系统
```css
/* 流程A - 蓝色系 */
--primary-a: #3b82f6;
--primary-a-dark: #2563eb;
--accent-a: #8b5cf6;

/* 流程B - 紫色系 */
--primary-b: #8b5cf6;
--primary-b-dark: #7c3aed;
--warning-b: #fbbf24;

/* 通用色 */
--success: #10b981;
--warning: #f59e0b;
--danger: #ef4444;
--gray-50: #f8fafc;
--gray-100: #f1f5f9;
--gray-500: #64748b;
--gray-900: #1e293b;
```

### 布局比例
```
双区域布局: 60% (工作区) + 40% (聊天区)
间距: 1.5rem (24px)
圆角: 1rem (16px)
```

### 动画时长
```
状态切换: 800ms ease-in-out
数据更新: 300ms ease-out
按钮点击: 150ms
进度条: 300ms ease-out
脉冲动画: 2s infinite
```

---

## 💡 核心交互原则

### Agent工作区
✅ **只展示成果** - 图表、数据卡片、方案
❌ **禁止过程** - 不要"正在分析..."、"我认为..."
✅ **动态更新** - 随聊天区实时变化

### 聊天交互区
✅ **完整对话** - 用户输入 → AI回复 → 思考 → 输出
✅ **可折叠** - 思考过程、Agent日志可展开/收起
✅ **时间顺序** - 按时间依次显示

---

## 🔧 常用代码片段

### 添加新消息
```typescript
addMessage({
  role: 'ai',
  content: '您的消息内容',
  thinking: {
    intentRecognition: '意图识别结果',
    knowledgeRetrieval: ['知识1', '知识2'],
    strategySelection: '策略选择',
    riskCheck: '风险检查',
  },
});
```

### 更新雷达图
```typescript
const newRadarValues = [...state.radarData.values];
newRadarValues[dimensionIndex] = Math.min(100, newRadarValues[dimensionIndex] + 20);
setState(prev => ({
  ...prev,
  radarData: { ...prev.radarData, values: newRadarValues },
}));
```

### 更新业务步骤
```typescript
updateBusinessStep(stepId, 'completed'); // 完成
updateBusinessStep(stepId + 1, 'processing'); // 下一步
```

---

## 📁 文件结构速查

```
roadmap-web/src/
├── components/
│   ├── FinancialPrototype.tsx    # 主容器 (状态管理)
│   ├── StandbyHome.tsx            # 待机态首页
│   ├── FlowA.tsx                  # 流程A (教育金规划)
│   └── FlowB.tsx                  # 流程B (风险测评)
├── types/
│   └── financial-prototype.ts     # 类型定义
└── App.tsx                        # 主应用
```

---

## 🐛 常见问题速查

### 问题1: 页面不显示
**原因**: 可能是端口被占用
**解决**: 检查终端输出的实际端口号

### 问题2: 雷达图不更新
**原因**: 状态更新逻辑错误
**解决**: 检查 `questionIndex` 和 `radarIndex` 的映射关系

### 问题3: AI主动介入不触发
**原因**: 时间阈值或题目索引不匹配
**解决**: 检查 `useEffect` 中的条件判断

### 问题4: 样式错乱
**原因**: CSS文件未正确导入
**解决**: 确保每个组件都导入了对应的CSS文件

---

## 📊 性能优化建议

### 当前实现
- ✅ React 19 并发特性
- ✅ CSS动画(GPU加速)
- ✅ 消息自动滚动

### 待优化
- [ ] 虚拟滚动(消息列表)
- [ ] 图片懒加载
- [ ] 代码分割(路由级别)
- [ ] 雷达图Canvas实现
- [ ] 防抖/节流(输入框)

---

## 🎬 演示检查清单

### 演示前
- [ ] 启动开发服务器
- [ ] 打开浏览器到正确页面
- [ ] 检查默认视图是否正确
- [ ] 准备好答案(避免现场思考)
- [ ] 关闭不必要的浏览器标签

### 流程A演示
- [ ] 点击"待机态 → AI工作模式"
- [ ] 依次回答5个问题
- [ ] 观察雷达图动态增长
- [ ] 展开思考过程和Agent日志
- [ ] 查看可行性评估结果
- [ ] 查看投资方案对比
- [ ] 返回首页

### 流程B演示
- [ ] 点击"待机态 → 业务辅助模式"
- [ ] 观察5步进度条
- [ ] 等待身份核验自动完成
- [ ] 回答前4道题
- [ ] 第5题停留10秒,等待AI介入
- [ ] 查看AI帮助提示
- [ ] 完成测评,查看结果
- [ ] 返回首页

---

## 📞 快速联系

- **设计文档**: `金融原型机首页交互设计优化方案.md`
- **开发说明**: `金融原型机开发说明.md`
- **演示脚本**: `演示脚本.md`
- **快速参考**: 本文档

---

**最后更新**: 2025-10-31
**版本**: v1.0.0
**打印友好**: ✅

---

## 🎯 一句话总结

> **流程A**: AI主动引导,实时画像,可行性先行,方案对比
> 
> **流程B**: 进度可视,AI陪伴,主动介入,快速办理

**核心理念**: 左侧展示成果,右侧展示过程,双区域协同,信息一致

---

**祝使用愉快!** 🎉

